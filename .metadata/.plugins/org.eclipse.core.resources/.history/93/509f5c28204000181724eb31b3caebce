package edu.uqam.inf5153.tp3.servicesTechniques.securite;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import edu.uqam.inf5153.tp3.servicesTechniques.bd.Connexion;

public class ControlleurDeBd {
	private static Connection conn = null;
	
	private static void seConnecter() throws ClassNotFoundException, SQLException{
		conn = Connexion.connecter();
	}


	public static boolean obtenirHistorique(String numAssuranceMaladie) throws ClassNotFoundException, SQLException{
		if( !Connexion.estConnecter() || conn == null ){
			seConnecter();
		}
		String sql = "select * from DossierMedical where numAssuranceMaladie=?";
		PreparedStatement pstmt = conn.prepareStatement(sql);
		pstmt.setString(1, numAssuranceMaladie);
		ResultSet rs = pstmt.executeQuery();
		return rs;
	}

}
